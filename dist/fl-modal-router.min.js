!function(){function a(b,c){if(!b){var d="",e=a.caller;if(!e)throw new Error('No "assert" function as a caller?');return e.caller&&e.caller.name&&(d=e.caller.name+": "),d+=c}return null}function b(){var b=a.apply(void 0,arguments);if("string"==typeof b)throw new Error(b)}function c(){var a=document.querySelectorAll(".modal"),b=Array.from(a),c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(h.classList.contains("in"))return"#"+h.id}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return null}function d(a){$(a).modal("hide")}function e(a,c){var d=Array.from(document.querySelectorAll(".modal-backdrop")),e=!0,f=!1,g=void 0;try{for(var h,i=d[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;j.remove()}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}c&&new Promise(function(a,b){$.ajax({type:"get",url:c,cache:!0,success:a,failure:b})}).then(function(d){var e=!a,f=!window.history.state||window.history.state.targetUrl!==c;if(!e&&!f){var g=a.querySelector(".modal-content");b(g,"Modal body not found."),g.innerHTML=d}});var l=$(a).modal();l.modal("show")}function f(a,c,d){var e=d||{};e.editedByModalRouter=!0;var f=k.getOpenModalSelector(),g=i()||{};return f||g.editedByModalRouter?a?e.lastNoModalUrl=a.lastNoModalUrl:g.editedByModalRouter?e.lastNoModalUrl=g.lastNoModalUrl:(b.warn(!1,"Unexpected route in modal router."),e.lastNoModalUrl=null):e.lastNoModalUrl=window.location.href,f?(e.modalSelector=f,e.targetUrl=c||window.location.href):(e.modalSelector=null,e.targetUrl=e.lastNoModalUrl||window.location.href),e}function g(a){b(a,"No state provided."),b(a.targetUrl,"No target URL provided."),window.history.replaceState(a,"",a.targetUrl)}function h(a){b(a,"No state provided."),b(a.targetUrl,"No target URL provided."),window.history.pushState(a,"",a.targetUrl)}function i(){return window.history.state}function j(a){function c(a){var b=a.state;o.isEdited(b)?o.enforceState(b):o.editCurrentState()}function d(a){var c=window.history.state;if(b("undefined"!=typeof c,"Unable to retrieve window state."),b(o.isEdited(c),"State should already have been edited."),!o.isEnforced(c)){var d=void 0;if("shown"===a.type){var e=a.relatedTarget;d=e?e.getAttribute("href"):null}else"hidden"===a.type?d=null:b(!1,"Error processing modal state. Not shown or hidden.");o.createNewState(d)}}function e(){if(!f){f=!0;var b=document.body;if(!b)return f=!1,void window.addEventListener("load",e);var g=a(document.body);window.addEventListener("popstate",c),g.on("shown.bs.modal",d),g.on("hidden.bs.modal",d),o.editCurrentState()}}var f=void 0;return{init:e}}b.warn=function(){var b=a.apply(void 0,arguments);"string"==typeof b&&console.warn(b)},b($,"jQuery not initialised.");var k={getOpenModalSelector:c,hideModal:d,showModal:e},l=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(){function a(){l(this,a),this.lastEditedState=null}return m(a,[{key:"createNewState",value:function(a){var b=f(this.lastEditedState,a);h(b),this.lastEditedState=b}},{key:"editCurrentState",value:function(){var a=i();if(!this.isEdited(a)){var b=f(this.lastEditedState,null,a);g(b),this.lastEditedState=b}}},{key:"isEdited",value:function(a){return a&&!!a.editedByModalRouter}},{key:"enforceState",value:function(a){b(a,"${state} is not a valid state to be enforced");var c=k.getOpenModalSelector(),d=document.querySelector(c),e=document.querySelector(a.modalSelector);d!==e&&(k.hideModal(d),k.showModal(e,a.targetUrl))}},{key:"isEnforced",value:function(a){var b=k.getOpenModalSelector(),c=document.querySelector(b),d=document.querySelector(a.modalSelector);return c===d}}]),a}(),o=new n,p=j(jQuery);p.init()}();
//# sourceMappingURL=fl-modal-router.min.map