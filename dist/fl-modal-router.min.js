function processCondition(a,b){if(!a){var c="",d=processCondition.caller;if(!d||!d.caller)throw new Error('No callers for "assert" function?');return d.caller&&d.caller.name&&(c=d.caller.name+": "),c+=b}return null}function assert(){var a=processCondition.apply(void 0,arguments);if(a)throw new Error(a)}function getOpenModalSelector(){var a=document.querySelectorAll(".modal"),b=Array.from(a),c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;if(h.classList.contains("in"))return"#"+h.id}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return null}function hideModal(a){$(a).modal("hide")}function showModal(a,b){var c=Array.from(document.querySelectorAll(".modal-backdrop")),d=!0,e=!1,f=void 0;try{for(var g,h=c[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;i.remove()}}catch(j){e=!0,f=j}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}b&&fetch(b).then(function(a){return a.text()}).then(function(c){var d=!a,e=!window.history.state||window.history.state.targetUrl!==b;if(!d&&!e){var f=a.querySelector(".modal-content");assert(f,"Modal body not found."),f.innerHTML=c}});var k=$(a).modal();k.modal("show")}function generateStateObject(a,b,c){var d=c||{};d.editedByModalRouter=!0;var e=utils.getOpenModalSelector(),f=getCurrentState()||{};return e||f.editedByModalRouter?a?d.lastNoModalUrl=a.lastNoModalUrl:f.editedByModalRouter?d.lastNoModalUrl=f.lastNoModalUrl:(assert.warn(!1,"Unexpected route in modal router."),d.lastNoModalUrl=null):d.lastNoModalUrl=window.location.href,e?(d.modalSelector=e,d.targetUrl=b||window.location.href):(d.modalSelector=null,d.targetUrl=d.lastNoModalUrl||window.location.href),d}function replaceState(a){assert(a,"No state provided."),assert(a.targetUrl,"No target URL provided."),window.history.replaceState(a,"",a.targetUrl)}function pushState(a){assert(a,"No state provided."),assert(a.targetUrl,"No target URL provided."),window.history.pushState(a,"",a.targetUrl)}function getCurrentState(){return window.history.state}function modalRouter(a){function b(a){var b=a.state;stateHandler.isEdited(b)?stateHandler.enforceState(b):stateHandler.editCurrentState()}function c(a){var b=window.history.state;if(assert("undefined"!=typeof b,"Unable to retrieve window state."),assert(stateHandler.isEdited(b),"State should already have been edited."),!stateHandler.isEnforced(b)){var c=void 0;if("shown"===a.type){var d=a.relatedTarget;c=d?d.getAttribute("href"):null}else"hidden"===a.type?c=null:assert(!1,"Error processing modal state. Not shown or hidden.");stateHandler.createNewState(c)}}function d(){if(!e){e=!0;var f=document.body;if(!f)return e=!1,void window.addEventListener("load",d);var g=a(document.body);window.addEventListener("popstate",b),g.on("shown.bs.modal",c),g.on("hidden.bs.modal",c),stateHandler.editCurrentState()}}var e=void 0;return{init:d}}var babelHelpers={};babelHelpers.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},babelHelpers.createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),assert.warn=function(){var a=processCondition.apply(void 0,arguments);a&&console.warn(a)},assert($,"jQuery not initialised.");var utils={getOpenModalSelector:getOpenModalSelector,hideModal:hideModal,showModal:showModal},StateHandler=function(){function a(){babelHelpers.classCallCheck(this,a),this.lastEditedState=null}return babelHelpers.createClass(a,[{key:"createNewState",value:function(a){var b=generateStateObject(this.lastEditedState,a);pushState(b),this.lastEditedState=b}},{key:"editCurrentState",value:function(){var a=getCurrentState();if(!this.isEdited(a)){var b=generateStateObject(this.lastEditedState,null,a);replaceState(b),this.lastEditedState=b}}},{key:"isEdited",value:function(a){return a&&!!a.editedByModalRouter}},{key:"enforceState",value:function(a){assert(a,"${state} is not a valid state to be enforced");var b=utils.getOpenModalSelector(),c=document.querySelector(b),d=document.querySelector(a.modalSelector);c!==d&&(utils.hideModal(c),utils.showModal(d,a.targetUrl))}},{key:"isEnforced",value:function(a){var b=utils.getOpenModalSelector(),c=document.querySelector(b),d=document.querySelector(a.modalSelector);return c===d}}]),a}(),stateHandler=new StateHandler,router=modalRouter(jQuery);router.init();
//# sourceMappingURL=fl-modal-router.min.map